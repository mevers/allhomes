<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract Past Sales Data from Allhomes.com.au • allhomes</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Extract Past Sales Data from Allhomes.com.au">
<meta property="og:description" content="Extract past sales data for specific suburb(s) and year(s) from allhomes.com.au.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">allhomes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Simple examples</li>
    <li>
      <a href="articles/price_bedrooms.html">Price as a function of the no. of bedrooms across three North Canberra suburbs</a>
    </li>
    <li>
      <a href="articles/median_price_Leichhardt.html">Median sale prices across Sydney Leichhardt suburbs in 2021</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Case studies</li>
    <li>
      <a href="articles/UV_model.html">Modelling the unimproved value in the ACT's Woden Valley</a>
    </li>
    <li>
      <a href="articles/spatial_median_price.html">Variability of the unimproved value per sqm across the ACT</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="allhomes">allhomes<a class="anchor" aria-label="anchor" href="#allhomes"></a>
</h1></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This is the repository for the <code>allhomes</code> R package. The main function that the package provides is <code><a href="reference/get_past_sales_data.html">get_past_sales_data()</a></code> which extracts past sales data from <a href="https://www.allhomes.com.au/" class="external-link">allhomes.com.au</a> for a (or multiple) suburb(s) and year(s).</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the package directly from GitHub</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mevers/allhomes"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a>
</h2>
<p>The function <code><a href="reference/get_past_sales_data.html">get_past_sales_data()</a></code> takes the following two arguments:</p>
<ul>
<li>
<code>suburb</code>: This is a <code>character</code> vector denoting a (or multiple) suburbs. Every entry must be of the form “<suburb_name>, <state>”, e.g. “Balmain, NSW”.</state></suburb_name>
</li>
<li>
<code>year</code>: This is an <code>numeric</code> or <code>integer</code> vector of the the year(s) of the sales history.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_past_sales_data.html">get_past_sales_data</a></span><span class="op">(</span><span class="st">"Balmain, NSW"</span>, <span class="fl">2019</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#[2022-07-27 14:52:47] Looking up division ID for suburb='Balmain, NSW'...</span></span>
<span><span class="co">#[2022-07-27 14:52:47] URL: https://www.allhomes.com.au/svc/locality/searchallbyname?st=NSW&amp;n=balmain</span></span>
<span><span class="co">#[2022-07-27 14:52:47] Finding data for ID=7857, year=2019...</span></span>
<span><span class="co">#[2022-07-27 14:52:47] URL: https://www.allhomes.com.au/ah/research/_/120785712/sale-history?year=2019</span></span>
<span><span class="co">#[2022-07-27 14:52:48] Found 229 entries.</span></span>
<span><span class="co">## A tibble: 229 × 27</span></span>
<span><span class="co">#   divis…¹ state postc…² value  year address bedro…³ bathr…⁴ ensui…⁵ garages carpo…⁶ contr…⁷ trans…⁸</span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt; &lt;lgl&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co"># 1 Balmain NSW   2041     7857  2019 1 Long…      NA      NA NA           NA NA      06/12/… 02/04/…</span></span>
<span><span class="co"># 2 Balmain NSW   2041     7857  2019 7 Alex…      NA      NA NA           NA NA      30/08/… 16/10/…</span></span>
<span><span class="co"># 3 Balmain NSW   2041     7857  2019 29 Bir…      NA      NA NA           NA NA      25/10/… 06/12/…</span></span>
<span><span class="co"># 4 Balmain NSW   2041     7857  2019 2 Well…       6       3 NA            4 NA      25/05/… 26/08/…</span></span>
<span><span class="co"># 5 Balmain NSW   2041     7857  2019 109 Mo…       4       2 NA            2 NA      25/02/… 08/04/…</span></span>
<span><span class="co"># 6 Balmain NSW   2041     7857  2019 10 Tha…       4       2 NA            4 NA      05/10/… 16/12/…</span></span>
<span><span class="co"># 7 Balmain NSW   2041     7857  2019 3/100 …      NA      NA NA           NA NA      18/07/… 06/09/…</span></span>
<span><span class="co"># 8 Balmain NSW   2041     7857  2019 160 Be…       5       4 NA            1 NA      18/10/… 13/12/…</span></span>
<span><span class="co"># 9 Balmain NSW   2041     7857  2019 25 Isa…      NA      NA NA           NA NA      01/05/… 02/09/…</span></span>
<span><span class="co">#10 Balmain NSW   2041     7857  2019 71 Mor…       4       2 NA            2 NA      24/05/… 05/07/…</span></span>
<span><span class="co">## … with 219 more rows, 14 more variables: list_date &lt;chr&gt;, price &lt;dbl&gt;, block_size &lt;dbl&gt;,</span></span>
<span><span class="co">##   transfer_type &lt;chr&gt;, full_sale_price &lt;dbl&gt;, days_on_market &lt;dbl&gt;, sale_type &lt;lgl&gt;,</span></span>
<span><span class="co">##   sale_record_source &lt;chr&gt;, building_size &lt;lgl&gt;, land_type &lt;lgl&gt;, property_type &lt;lgl&gt;,</span></span>
<span><span class="co">##   purpose &lt;chr&gt;, unimproved_value &lt;lgl&gt;, unimproved_value_ratio &lt;lgl&gt;, and abbreviated variable</span></span>
<span><span class="co">##   names ¹​division, ²​postcode, ³​bedrooms, ⁴​bathrooms, ⁵​ensuites, ⁶​carports, ⁷​contract_date,</span></span>
<span><span class="co">##   ⁸​transfer_date</span></span>
<span><span class="co">## ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></code></pre></div>
<p>Under the hood, the function <code><a href="reference/get_past_sales_data.html">get_past_sales_data()</a></code> first calls a helper function <code><a href="reference/get_ah_division_ids.html">get_ah_division_ids()</a></code> that determines for every <code>suburb</code> entry the Allhomes “division” name and ID. The division ID is then used to extract past sales data from the Allhomes website using the low-level function <code><a href="reference/extract_past_sales_data.html">extract_past_sales_data()</a></code>.</p>
<p>Currently, there are limited sanity checks in place to verify if past sales data are available for a particular suburb and year. Allhomes does not have data for all suburbs and years (for example, Allhomes past sales data for Victoria is pretty much absent).</p>
<p><code>allhomes</code> also provides two datasets <code>divisions_ACT</code> and <code>divisions_NSW</code> that list division names and IDs for all Allhomes divisions (suburbs) in the ACT and NSW, respectively.</p>
</div>
<div class="section level2">
<h2 id="further-comments">Further comments<a class="anchor" aria-label="anchor" href="#further-comments"></a>
</h2>
<div class="section level3">
<h3 id="allhomes-localities">Allhomes localities<a class="anchor" aria-label="anchor" href="#allhomes-localities"></a>
</h3>
<p>The (unofficial) Allhomes API distinguishes between different types of “localities”; in increasing level of granularity these are: state &gt; region &gt; district &gt; division &gt; street &gt; address. Divisions (roughly) correspond to suburbs. The <code>allhomes</code> package pulls in past sales data at the division (i.e. suburb) level.</p>
</div>
<div class="section level3">
<h3 id="allhomes-past-sales-data">Allhomes past sales data<a class="anchor" aria-label="anchor" href="#allhomes-past-sales-data"></a>
</h3>
<p>Allhomes (which is part of <a href="https://en.wikipedia.org/wiki/Domain_Group" class="external-link">Domain Group</a>) receives historical past sales data from relevant state departments. Some details on Allhomes’ data retention are given <a href="https://help.allhomes.com.au/hc/en-us/articles/360055268773-Removal-of-historical-sales-data" class="external-link">here</a>.</p>
<p>While there seems to exist an (inofficial) Allhomes API to query IDs (which are necessary for looking up past sales data), past sales data themselves need to be scraped from somewhat awkwardly-formatted static HTML tables. Data for every sale is stored within a <code>&lt;tbody&gt;</code> element; within every <code>&lt;tbody&gt;</code> element, individual values (address, price, dates, block size, etc.) are spread across 3 lines, each contained within a <code>&lt;td&gt;</code> element; unfortunately, the format of every line is not consistent.</p>
</div>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>This project is neither related to nor endorsed by <a href="https://www.allhomes.com.au/" class="external-link">allhomes.com.au</a>. With changes to how Allhomes (and Domain group) manages and formats data, some or all of the functions might break at any time. There is also no guarantee that historical past sales data won’t change.</p>
<p>All data provided are subject to the <a href="https://www.allhomes.com.au/ah/advertising-terms/" class="external-link">allhomes “Advertising Sales Agreement terms and conditions - All Homes Pty Ltd”</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing allhomes</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Maurits Evers <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Maurits Evers.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
